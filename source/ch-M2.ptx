<?xml version='1.0' encoding='utf-8'?>
<chapter xml:id="ch-M2">
    <title>Macaulay 2</title>
    <introduction>
        <p>
This chapter is co-authored by Francesca Gandini, Sumner Strom, Al Ashir Intisar
        </p>
    </introduction>
    <section xml:id="sec-template">
        <title>Template </title>
        <p>
            This is the introduction to the template.
        </p>
        <subsection xml:id="subsec-template">
            <title>Template Subsection</title>
            <p>
                This is the template subsection.
            </p>
            
        </subsection>
    <subsection xml:id="subsec-notes">
            <title>Notes Subsection</title>
            <p>
                To build in pretext use the template subsection and pretext environment features.
                Make sure that you are building and compiling from main using preview code chat.
                Additionally, when running if the compilation fails run the command "pretext build web" in terminal.
                Make sure that all of the xml have unique ids so that you dont run into compilation errors. 
                Follow the other chapters to find out how things are used.
                Make sure that the sections are properly linked within the main.ptx. Additionally, use the subsections and sections for organization.
                If something doesnt display there is a paragraph line missing.

            </p>
            
        </subsection>
    </section>
    <section xml:id="sec-m2-codespace">
      <title>Creating a M2 Codespace</title>
    
      <p>
        A turn-key repository for creating a Codespace (<xref ref="sec-codespaces"/>) for Macaulay2 is available at
        <url href="https://github.com/fragandi/M2-codespace">fragandi/M2-codespace</url>. Below we provide detailed instructions. 
        If you are familiar with GitHub Codespaces, you may be able to follow the instructions in the README directly. Otherwise, follow the steps below for a smoother setup.
      </p>
    
      <p>
        <em>Step 1:</em> <strong>Fork the Repository: </strong><br/>
        Navigate to <url href="https://github.com/fragandi/M2-codespace">fragandi/M2-codespace</url> and click the <code>Fork</code> button in the top-right corner of the page.
      </p>
      <figure xml:id="fork-repo-icon">
        <caption>Select "Create a new fork" next to the plus icon.</caption>
        <image source="screenshots/fork_repo.png">
          <shortdescription>
            screenshot of M2-codespace with forking instructions.
          </shortdescription>
        </image>
      </figure>
    
      <p>
        <em>Step 2:</em> <strong>Create a Codespace: </strong><br/>
        Open your forked repository, click the green <code>Code</code> button, and select <code>Create codespace on main</code>.
      </p>
    
      <figure xml:id="create-codespace-icon">
        <caption>Creating codespace on forked GitHub repository.</caption>
        <image source="screenshots/create_codespace.png">
          <shortdescription>
            screenshot of creating codespace on forked GitHub repository.
          </shortdescription>
        </image>
      </figure>
    
      <p>
        <em>Step 3:</em> <strong>Reload VS Code: </strong><br/>
        Once the Codespace starts, open the Command Palette (<code>Ctrl+Shift+P</code> or <code>Cmd+Shift+P</code>), then type:
      </p>
    
      <pre>
      Reload Window
      </pre>
    
      <p>
        <em>Step 4:</em> <strong>Check Macaulay2 Executable Path: </strong><br/>
        If you receive an error like “Cannot find Macaulay2 executable,” open the extension settings for Macaulay2 for Codespace and verify the executable path.
      </p>
    
      <figure xml:id="extension-settings-icon">
        <caption>Go to the Macaulay2 for Codespace extension settings as shown in the image above.</caption>
        <image source="screenshots/extension_settings.png">
          <shortdescription>
            screenshot of Macaulay2 for Codespace extension settings.
          </shortdescription>
        </image>
      </figure>
      <figure xml:id="executable-path-icon">
        <caption>If your path is different than what it shows in the image above try the steps below:</caption>
        <image source="screenshots/extension_executable_path.png">
          <shortdescription>
            screenshot of Macaulay2 for Codespace extension settings correct executable path.
          </shortdescription>
        </image>
      </figure>
    
      <p>
        <strong>Fix:</strong> Open the Command Palette and disable VS Code Settings Sync:
      </p>
    
      <pre>
      Settings Sync: Turn Off
      </pre>
    
      <p>
        Then reload the window again as in Step 3. If problems persist, you may delete and recreate the Codespace.
      </p>
    
      <p>
        <em>Step 5:</em> <strong>Verify Installation: </strong><br/>
        To confirm Macaulay2 installed correctly, open the Command Palette again and run:
      </p>
    
      <pre>
      Codespaces: View Creation Log
      </pre>
    
      <p>
        Look for confirmation lines like:
      </p>
    
      <pre>
      ✅ Macaulay2 installed successfully!
      </pre>
    
      <p>
        ✅ Following all these steps ensures that Macaulay2 is ready to use inside your Codespace and only the correct environment settings are applied.
      </p>
    
      <p>
        <strong>Alternative:</strong> If you want to create your own repository with Macaulay2 support from scratch, copy the <code>.devcontainer/</code> directory and optionally the <code>M2codes/</code>, <code>image_files/</code>, and <code>README.md</code> from the original repo. Push to GitHub and launch your own Codespace.
      </p>
    
      <p>
        For more information on using Macaulay2, visit the <url href="https://macaulay2.com/doc/Macaulay2/share/doc/Macaulay2/Macaulay2Doc/html/___The_sp__Macaulay2_splanguage.html">official documentation</url>.
      </p>
    </section>         
<section xml:id="sec-m2-commands">
        <title>Basic M2 commands </title>
    </section>
<section xml:id="sec-invariantrings-package">
        <title>InvariantRings package </title>
    </section>
<section xml:id="sec-theory-invariant-rings">
        <title>Theory for invariant rings </title>
        <p>
            hello <m>4 \in \mathbb{Z}</m> this is true.
            <theorem> <p>Nöether:  
            <me>
                R^G = \mathbb{K} [ R_G(\bar x^{\bar \beta}) | \; |\bar \beta| \leq |G|]
            </me>
            NDB: The ring of invariants is generated in degrees <m>\leq |G|</m> </p>
            </theorem>
        </p>
    </section>
</chapter>
